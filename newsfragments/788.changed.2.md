Correct the handling of multiple X-Forwarded-For headers to Synapse.

This may have exhibit itself as requests being incorrectly rate-limited by Synapse.

The source IP logged by HAProxy is now always the IP connecting to HAProxy rather than
a value extracted from the X-Forwarded-For header (if present). This is usually an IP
for the ingress controller.
